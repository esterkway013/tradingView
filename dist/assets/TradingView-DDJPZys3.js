import{L as T}from"./lightweight-charts.esm.production-CogInGpZ.js";import{f as g,r as M,o as S,g as V,c as k,a as f,b,d as x,_ as I}from"./index-DWPkWjPj.js";const D=100,v=.6,y=50,E=g({__name:"TradingView",setup(z){const d=M(null);let u,m,p,h=null,w,L=D,i=Math.floor(Date.now()/100);function _(){const e=L,t=(Math.random()-.5)*v,o=+(e+t).toFixed(2),s=Math.max(e,o)+Math.random()*v*.5,c=Math.min(e,o)-Math.random()*v*.5,l=Math.floor(Math.random()*100+10);L=o,i+=1;const n={time:i,open:e,high:+s.toFixed(2),low:+c.toFixed(2),close:o},r={time:i,value:o},a={time:i,value:l,color:o>=e?"#22c55e":"#ef4444"};return{candle:n,priceLine:r,vol:a}}return S(async()=>{if(await new Promise(n=>setTimeout(n,100)),!d.value)return;const e=window.innerWidth,t=T(d.value,{width:e?e-50:300,height:400,layout:{background:{color:"#0f172a"},textColor:"#e5e7eb"},grid:{vertLines:{color:"#1e293b"},horzLines:{color:"#1e293b"}},timeScale:{timeVisible:!0,secondsVisible:!0}});u=t.addCandlestickSeries({upColor:"#22c55e",downColor:"#ef4444",borderVisible:!1,wickUpColor:"#22c55e",wickDownColor:"#ef4444"}),m=t.addLineSeries({color:"#facc15",lineWidth:2}),p=t.addHistogramSeries({color:"#22c55e",priceFormat:{type:"volume"},priceScaleId:"",scaleMargins:{top:.8,bottom:0}});const o=5e4,s=[],c=[],l=[];for(let n=0;n<o;n++){const{candle:r,priceLine:a,vol:C}=_();s.push(r),c.push(a),l.push(C)}u.setData(s),m.setData(c),p.setData(l),h=window.setInterval(()=>{const{candle:n,priceLine:r,vol:a}=_();u.update(n),m.update(r),p.update(a)},y),w=()=>{t.resize(window.innerWidth-50,400)},window.addEventListener("resize",w)}),V(()=>{h&&clearInterval(h),window.removeEventListener("resize",w)}),(e,t)=>(x(),k("div",null,[t[0]||(t[0]=f("h2",{style:{color:"#e5e7eb"}},[b(" Kway Stock Market "),f("br"),b("(K-Line + Price + Volume) ")],-1)),f("div",{ref_key:"chartContainer",ref:d},null,512)]))}}),N=I(E,[["__scopeId","data-v-b17314ce"]]);export{N as default};
